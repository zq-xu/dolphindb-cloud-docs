import{_ as o,r as e,o as D,c,a as n,b as s,d as a,w as p,e as r}from"./app.7cabacd3.js";const t={},i=n("h1",{id:"crd-operator",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#crd-operator","aria-hidden":"true"},"#"),s(" CRD && Operator")],-1),y=n("code",null,"CRD",-1),d=n("code",null,"StatefulSet",-1),v=n("code",null,"Service",-1),u=n("code",null,"CRD",-1),m=n("p",null,"在Kubernetes环境中，DolphinDB相关的CRD主要包括:",-1),C=n("ul",null,[n("li",null,[n("a",{href:"#dolphindb"},"DolphinDB"),s(": 定义DolphinDB的相关属性；")]),n("li",null,[n("a",{href:"#dolphindb-backup"},"DolphinDB Backup"),s("：定义DolphinDB备份的相关属性；")])],-1),b=n("code",null,"CRD && Operator",-1),h=r(`<h2 id="dolphindb" tabindex="-1"><a class="header-anchor" href="#dolphindb" aria-hidden="true">#</a> DolphinDB</h2><p>在Kubernetes环境中，DolphinDB被定义为名为<code>dolphindb</code>(简称ddb)的<code>CRD</code>，并由<code>DolphinDB Operator</code>组件进行解析和管理。</p><h3 id="属性说明" tabindex="-1"><a class="header-anchor" href="#属性说明" aria-hidden="true">#</a> 属性说明</h3><p><code>ddb</code>资源示例及相关属性说明如下：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#CE9178;">kubectl -ndolphindb get ddb xzq -oyaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># 控制台输出如下：</span></span>
<span class="line"><span style="color:#569CD6;">apiVersion</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">dolphindb.dolphindb.io/v1</span><span style="color:#D4D4D4;">   </span><span style="color:#6A9955;"># CRD版本，格式为$group(dolphindb).$domain(dolphindb.io)/$version(v1)</span></span>
<span class="line"><span style="color:#569CD6;">kind</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">DolphinDB</span><span style="color:#D4D4D4;">                 </span><span style="color:#6A9955;"># CRD的资源类型, DolphinDB</span></span>
<span class="line"><span style="color:#569CD6;">metadata</span><span style="color:#D4D4D4;">:                       </span><span style="color:#6A9955;"># 基础信息</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">name</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">xzq</span><span style="color:#D4D4D4;">                         </span><span style="color:#6A9955;"># 名称</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">namespace</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">dolphindb</span><span style="color:#D4D4D4;">              </span><span style="color:#6A9955;"># 命名空间</span></span>
<span class="line"><span style="color:#569CD6;">spec</span><span style="color:#D4D4D4;">:                           </span><span style="color:#6A9955;"># DolphinDB具体属性</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">version</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">v2.00.7</span><span style="color:#D4D4D4;">                  </span><span style="color:#6A9955;"># DolphinDB版本</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">mode</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">cluster</span><span style="color:#D4D4D4;">                     </span><span style="color:#6A9955;"># DolphinDB类型.cluster: 集群模式；standalone: 单节点模式 </span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">clusterType</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">multicontroller</span><span style="color:#D4D4D4;">      </span><span style="color:#6A9955;"># 集群模式. multicontroller: 多Controller节点，该模式下，Controller数量不少于3个;singlecontroller: 单Controller节点，该模式下，Controller数量固定为1.</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">storageClassName</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">standard</span><span style="color:#D4D4D4;">        </span><span style="color:#6A9955;"># 存储类名称，使用该存储类根据PVC来自动分配PV.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">##-----------------------------计算节点相关属性-----------------------------##</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">computenode</span><span style="color:#D4D4D4;">:                      </span><span style="color:#6A9955;"># 计算节点相关属性</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">dataSize</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span><span style="color:#D4D4D4;">                       </span><span style="color:#6A9955;"># 计算节点数据所需持久卷的空间大小</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">logSize</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span><span style="color:#D4D4D4;">                        </span><span style="color:#6A9955;"># 计算节点日志所需持久卷的空间大小</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">port</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">32210</span><span style="color:#D4D4D4;">                         </span><span style="color:#6A9955;"># 计算节点端口，默认为32210</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">replicas</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">3</span><span style="color:#D4D4D4;">                         </span><span style="color:#6A9955;"># 计算节点的个数</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">resources</span><span style="color:#D4D4D4;">:                          </span><span style="color:#6A9955;"># 计算节点资源信息，通常limit和request保持一致</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">limits</span><span style="color:#D4D4D4;">:                               </span><span style="color:#6A9955;"># 计算节点资源限制(使用资源上限)</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">cpu</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">2</span><span style="color:#D4D4D4;">                               </span><span style="color:#6A9955;"># 计算节点cpu上限，2Core</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">memory</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span><span style="color:#D4D4D4;">                             </span><span style="color:#6A9955;"># 计算节点memory上限，1G</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">requests</span><span style="color:#D4D4D4;">:                             </span><span style="color:#6A9955;"># 计算节点资源要求(使用资源下限，表示一定可以分配到的资源)</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">cpu</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">2</span><span style="color:#D4D4D4;">                               </span><span style="color:#6A9955;"># 计算节点的cpu要求，2Core</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">memory</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span><span style="color:#D4D4D4;">                             </span><span style="color:#6A9955;"># 计算节点的memory要求，1G</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">volumes</span><span style="color:#D4D4D4;">: {}                             </span><span style="color:#6A9955;"># 所有计算节点对应的Pod需要额外挂载的卷，可参考Kubernetes中卷的定义</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">volumeMounts</span><span style="color:#D4D4D4;">: {}                        </span><span style="color:#6A9955;"># 所有计算节点对应的Pod中DolphinDB容器的卷挂载，可参考Kubernetes中卷挂载的定义</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">instances</span><span style="color:#D4D4D4;">:                          </span><span style="color:#6A9955;"># 计算节点实例相关属性，map结构</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#D4D4D4;">:                                  </span><span style="color:#6A9955;"># 编号为0的计算节点实例的相关属性</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">paused</span><span style="color:#D4D4D4;">: </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">                            </span><span style="color:#6A9955;"># 编号为0的计算节点暂停服务，表现为pod停止运行，但保留PVC和Service</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">service</span><span style="color:#D4D4D4;">: {}                             </span><span style="color:#6A9955;"># 编号为0的计算节点创建单独的service资源</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">volumes</span><span style="color:#D4D4D4;">: {}                             </span><span style="color:#6A9955;"># 编号为0的计算节点对应的Pod需要额外挂载的卷，在spec.computenode.volumes的基础上叠加</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">volumeMounts</span><span style="color:#D4D4D4;">: {}                        </span><span style="color:#6A9955;"># 编号为0的计算节点对应的Pod中DolphinDB容器的卷挂载，在spec.computenode.volumeMounts的基础上叠加</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">##-----------------------------控制节点相关属性-----------------------------##</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">controller</span><span style="color:#D4D4D4;">:                       </span><span style="color:#6A9955;"># 控制节点相关属性</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">clusterConfig</span><span style="color:#D4D4D4;">:                      </span><span style="color:#6A9955;"># cluster.config的相关运行时配置，map结构，只需要定义需要配置的属性即可，其余配置使用默认值</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">maxMemSize</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;1&quot;</span><span style="color:#D4D4D4;">                       </span><span style="color:#6A9955;"># 配置示例</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">dataSize</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span><span style="color:#D4D4D4;">                       </span><span style="color:#6A9955;"># 控制节点数据所需持久卷的空间大小                       </span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">logSize</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span><span style="color:#D4D4D4;">                        </span><span style="color:#6A9955;"># 控制节点数据所需持久卷的空间大小</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">port</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">31210</span><span style="color:#D4D4D4;">                         </span><span style="color:#6A9955;"># 控制节点端口，默认为31210</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">replicas</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">3</span><span style="color:#D4D4D4;">                         </span><span style="color:#6A9955;"># 控制节点的个数</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">resources</span><span style="color:#D4D4D4;">:                          </span><span style="color:#6A9955;"># 控制节点资源信息，通常limit和request保持一致</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">limits</span><span style="color:#D4D4D4;">:                               </span><span style="color:#6A9955;"># 控制节点资源限制(使用资源上限)</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">cpu</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">200m</span><span style="color:#D4D4D4;">                               </span><span style="color:#6A9955;"># 控制节点cpu上限，200m,即0.2Core</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">memory</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span><span style="color:#D4D4D4;">                             </span><span style="color:#6A9955;"># 控制节点memory上限，1G</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">requests</span><span style="color:#D4D4D4;">:                             </span><span style="color:#6A9955;"># 控制节点资源要求(使用资源下限，表示一定可以分配到的资源)</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">cpu</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">200m</span><span style="color:#D4D4D4;">                               </span><span style="color:#6A9955;"># 控制节点的cpu要求，200m,即0.2Core</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">memory</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span><span style="color:#D4D4D4;">                             </span><span style="color:#6A9955;"># 控制节点的memory要求，1G</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">volumes</span><span style="color:#D4D4D4;">: {}                         </span><span style="color:#6A9955;"># 所有控制节点对应的Pod需要额外挂载的卷，可参考Kubernetes中卷的定义</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">volumeMounts</span><span style="color:#D4D4D4;">: {}                    </span><span style="color:#6A9955;"># 所有控制节点对应的Pod中DolphinDB容器的卷挂载，可参考Kubernetes中卷挂载的定义</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">instances</span><span style="color:#D4D4D4;">:                          </span><span style="color:#6A9955;"># 控制节点实例相关属性</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#D4D4D4;">:                                  </span><span style="color:#6A9955;"># 编号为0的控制节点实例的相关属性</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">service</span><span style="color:#D4D4D4;">: {}                             </span><span style="color:#6A9955;"># 编号为0的控制节点创建单独的service资源</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">volumes</span><span style="color:#D4D4D4;">: {}                             </span><span style="color:#6A9955;"># 编号为0的控制节点对应的Pod需要额外挂载的卷，在spec.controller.volumes的基础上叠加</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">volumeMounts</span><span style="color:#D4D4D4;">: {}                        </span><span style="color:#6A9955;"># 编号为0的控制节点对应的Pod中DolphinDB容器的卷挂载，在spec.controller.volumeMounts的基础上叠加</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">##-----------------------------数据节点相关属性-----------------------------##</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">datanode</span><span style="color:#D4D4D4;">:                         </span><span style="color:#6A9955;"># 数据节点相关属性</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">dataSize</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span><span style="color:#D4D4D4;">                       </span><span style="color:#6A9955;"># 数据节点数据所需持久卷的空间大小</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">logSize</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span><span style="color:#D4D4D4;">                        </span><span style="color:#6A9955;"># 数据节点日志所需持久卷的空间大小</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">port</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">32210</span><span style="color:#D4D4D4;">                         </span><span style="color:#6A9955;"># 数据节点端口，默认为32210</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">replicas</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">3</span><span style="color:#D4D4D4;">                         </span><span style="color:#6A9955;"># 数据节点的个数</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">resources</span><span style="color:#D4D4D4;">:                          </span><span style="color:#6A9955;"># 数据节点资源信息，通常limit和request保持一致</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">limits</span><span style="color:#D4D4D4;">:                               </span><span style="color:#6A9955;"># 数据节点资源限制(使用资源上限)</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">cpu</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">200m</span><span style="color:#D4D4D4;">                               </span><span style="color:#6A9955;"># 数据节点cpu上限，200m,即0.2Core</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">memory</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span><span style="color:#D4D4D4;">                             </span><span style="color:#6A9955;"># 数据节点memory上限，1G</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">requests</span><span style="color:#D4D4D4;">:                             </span><span style="color:#6A9955;"># 数据节点资源要求(使用资源下限，表示一定可以分配到的资源)</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">cpu</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">200m</span><span style="color:#D4D4D4;">                               </span><span style="color:#6A9955;"># 数据节点的cpu要求，200m,即0.2Core</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">memory</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span><span style="color:#D4D4D4;">                             </span><span style="color:#6A9955;"># 数据节点的memory要求，1G</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">volumes</span><span style="color:#D4D4D4;">: {}                         </span><span style="color:#6A9955;"># 所有数据节点对应的Pod需要额外挂载的卷，可参考Kubernetes中卷的定义</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">volumeMounts</span><span style="color:#D4D4D4;">: {}                    </span><span style="color:#6A9955;"># 所有数据节点对应的Pod中DolphinDB容器的卷挂载，可参考Kubernetes中卷挂载的定义</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">instances</span><span style="color:#D4D4D4;">:                          </span><span style="color:#6A9955;"># 数据节点实例相关属性，map结构</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#D4D4D4;">:                                  </span><span style="color:#6A9955;"># 编号为0的数据节点实例的相关属性</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">paused</span><span style="color:#D4D4D4;">: </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">                            </span><span style="color:#6A9955;"># 编号为0的数据节点暂停服务，表现为pod停止运行，但保留PVC和Service</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">service</span><span style="color:#D4D4D4;">: {}                             </span><span style="color:#6A9955;"># 编号为0的数据节点创建单独的service资源</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">volumes</span><span style="color:#D4D4D4;">: {}                             </span><span style="color:#6A9955;"># 编号为0的数据节点对应的Pod需要额外挂载的卷，在spec.datanode.volumes的基础上叠加</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">volumeMounts</span><span style="color:#D4D4D4;">: {}                        </span><span style="color:#6A9955;"># 编号为0的数据节点对应的Pod中DolphinDB容器的卷挂载，在spec.datanode.volumeMounts的基础上叠加</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">##-----------------------------其他属性-----------------------------##        </span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">disableExporter</span><span style="color:#D4D4D4;">: </span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">            </span><span style="color:#6A9955;"># 是否禁用exporter(监控指标采集组件)</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">disablePromtail</span><span style="color:#D4D4D4;">: </span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">            </span><span style="color:#6A9955;"># 是否禁用promtail(日志采集组件)</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">disableCoreDump</span><span style="color:#D4D4D4;">: </span><span style="color:#569CD6;">false</span><span style="color:#D4D4D4;">            </span><span style="color:#6A9955;"># 是否禁用CoreDump</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">logCleanLimit</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;0.9&quot;</span><span style="color:#D4D4D4;">              </span><span style="color:#6A9955;"># 日志清理阈值(日志申请的PV中的日志大小达到该阈值后，开始清理历史日志)，默认为0.9</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">minPersistentVolumeSize</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;0&quot;</span><span style="color:#D4D4D4;">      </span><span style="color:#6A9955;"># PV最小空间大小，主要适用于有限制持久卷最小空间的公有云环境</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">customMeta</span><span style="color:#D4D4D4;">:                       </span><span style="color:#6A9955;"># 自定义属性，主要用于Kubernetes环境的一些特殊设置</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">domainSuffix</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">dolphin.com</span><span style="color:#D4D4D4;">           </span><span style="color:#6A9955;"># 自定义域名后缀，用于替换Kubernetes集群默认内部域名后缀为svc.cluster.local</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">podLabels</span><span style="color:#D4D4D4;">: {}                       </span><span style="color:#6A9955;"># dolphindb相关Pod额外添加的label</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">podAnnotations</span><span style="color:#D4D4D4;">: {}                  </span><span style="color:#6A9955;"># dolphindb相关Pod额外添加的annotation</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">pvcLabels</span><span style="color:#D4D4D4;">: {}                       </span><span style="color:#6A9955;"># dolphindb相关PVC额外添加的label</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">pvcAnnotations</span><span style="color:#D4D4D4;">: {}                  </span><span style="color:#6A9955;"># dolphindb相关PVC额外添加的annotation</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">serviceLabels</span><span style="color:#D4D4D4;">: {}                   </span><span style="color:#6A9955;"># dolphindb相关Service额外添加的label</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">serviceAnnotations</span><span style="color:#D4D4D4;">: {}              </span><span style="color:#6A9955;"># dolphindb相关Service额外添加的annotation</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">nodeAffinity</span><span style="color:#D4D4D4;">:                     </span><span style="color:#6A9955;"># 节点亲和性，影响DolphinDB相关Pod资源调度到哪些节点上，详情可参考Kubernetes节点亲和性的相关定义。此处表示DolphinDB相关Pod优先调度到具有&quot;dolphindb.io/pod: dolphindb&quot;标签的节点上。</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">preferredDuringSchedulingIgnoredDuringExecution</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">    - </span><span style="color:#569CD6;">preference</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">matchExpressions</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">        - </span><span style="color:#569CD6;">key</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">dolphindb.io/pod</span></span>
<span class="line"><span style="color:#D4D4D4;">          </span><span style="color:#569CD6;">operator</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">In</span></span>
<span class="line"><span style="color:#D4D4D4;">          </span><span style="color:#569CD6;">values</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">          - </span><span style="color:#CE9178;">dolphindb</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">weight</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">1</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">timeMeta</span><span style="color:#D4D4D4;">:                         </span><span style="color:#6A9955;"># 时间相关数据，主要用于保证容器时钟和Kubernetes环境节点时间保持一致</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">localTimeFileHostPath</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">/etc/localtime</span><span style="color:#D4D4D4;">   </span><span style="color:#6A9955;"># Kubernetes环境节点上时区文件所在路径，默认值/etc/localtime</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">localTimeFileMountPath</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">/etc/localtime</span><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;"># 容器内时区文件挂载路径(默认指定，用户无需自定义)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="基础示例" tabindex="-1"><a class="header-anchor" href="#基础示例" aria-hidden="true">#</a> 基础示例</h3><p>以下是<code>ddb</code>资源的一个基础示例，用于生成一个多Controller模式的DolphinDB集群（<a href="#%E5%B1%9E%E6%80%A7%E8%AF%B4%E6%98%8E">属性说明</a>）:</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">apiVersion</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">dolphindb.dolphindb.io/v1</span></span>
<span class="line"><span style="color:#569CD6;">kind</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">DolphinDB</span></span>
<span class="line"><span style="color:#569CD6;">metadata</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">name</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">xzq</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">namespace</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">dolphindb</span></span>
<span class="line"><span style="color:#569CD6;">spec</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">version</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">v2.00.7</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">mode</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">cluster</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">clusterType</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">multicontroller</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">storageClassName</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">standard</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">computenode</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">dataSize</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">logSize</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">replicas</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">3</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">resources</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">limits</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">cpu</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">200m</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">memory</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">requests</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">cpu</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">200m</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">memory</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">controller</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">dataSize</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">logSize</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">replicas</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">3</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">resources</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">limits</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">cpu</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">200m</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">memory</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">requests</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">cpu</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">200m</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">memory</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">datanode</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">dataSize</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">logSize</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">replicas</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">3</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">resources</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">limits</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">cpu</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">200m</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">memory</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">requests</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">cpu</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">200m</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">memory</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">1Gi</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="dolphindb-backup" tabindex="-1"><a class="header-anchor" href="#dolphindb-backup" aria-hidden="true">#</a> DolphinDB Backup</h2><p>DolphinDB的备份在Kubernetes环境中被定义为名为<code>dolphindb backup</code>的<code>CRD</code>.</p>`,10);function A(E,B){const l=e("RouterLink");return D(),c("div",null,[i,n("p",null,[s("在Kubernetes环境中，DolphinDB主要使用"),a(l,{to:"/zh/reference/kubernetes/crd-operator.html"},{default:p(()=>[s("CRD && Operator模式")]),_:1}),s("进行管理。")]),n("p",null,[s("DolphinDB被定义为"),a(l,{to:"/zh/reference/kubernetes/crd-operator.html#crd%E6%A6%82%E5%BF%B5"},{default:p(()=>[s("CRD(自定义资源)")]),_:1}),s("，相应的"),a(l,{to:"/zh/reference/kubernetes/crd-operator.html#operator%E6%A6%82%E5%BF%B5"},{default:p(()=>[s("Operator")]),_:1}),s("组件根据"),y,s("解析并管理构成"),a(l,{to:"/zh/tutorial/kubernetes/dolphindb-runtime.html#dolphindb%E8%BF%90%E8%A1%8C%E6%97%B6"},{default:p(()=>[s("DolphinDB运行时")]),_:1}),s("的"),d,s("、"),v,s("等Kubernetes资源，同时管理"),u,s("的状态。")]),m,C,n("p",null,[s("基于"),b,s("部署DolphinDB可参考"),a(l,{to:"/zh/tutorial/kubernetes/dolphindb-deployment.html#crd-operator%E9%83%A8%E7%BD%B2"},{default:p(()=>[s("部署方式")]),_:1}),s("。")]),h])}const f=o(t,[["render",A],["__file","crd-operator.html.vue"]]);export{f as default};
